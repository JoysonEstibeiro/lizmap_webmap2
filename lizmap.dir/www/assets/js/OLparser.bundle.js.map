{"version":3,"file":"OLparser.bundle.js","mappings":"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","sources":["webpack://lizmap-web-client/./node_modules/jsts/org/locationtech/jts/io/OL3Parser.js"],"sourcesContent":[" \n\n/**\n * @module org/locationtech/jts/io/OL3Parser\n */\n\nimport Coordinate from '../geom/Coordinate.js'\nimport GeometryFactory from '../geom/GeometryFactory.js'\n\nfunction p2c(p) {\n  return [p.x, p.y]\n}\n\nexport default class OL3Parser {\n  /**\n   * OpenLayers Geometry parser and writer\n   * @param {GeometryFactory} geometryFactory\n   * @param {ol} olReference\n   */\n  constructor(geometryFactory, olReference) {\n    this.geometryFactory = geometryFactory || new GeometryFactory()\n    this.ol = olReference || (typeof ol !== 'undefined' && ol)\n  }\n\n  /**\n   * Inject OpenLayers geom classes\n   */\n  inject(Point, LineString, LinearRing, Polygon, MultiPoint, MultiLineString, MultiPolygon, GeometryCollection) {\n    this.ol = {\n      geom: {\n        Point, LineString, LinearRing, Polygon, MultiPoint, MultiLineString, MultiPolygon, GeometryCollection\n      }\n    }\n  }\n\n  /**\n   * @param geometry {ol.geom.Geometry}\n   * @return {Geometry}\n   * @memberof module:org/locationtech/jts/io/OL3Parser#\n   */\n  read(geometry) {\n    const ol = this.ol\n    if (geometry instanceof ol.geom.Point)\n      return this.convertFromPoint(geometry)\n    else if (geometry instanceof ol.geom.LineString)\n      return this.convertFromLineString(geometry)\n    else if (geometry instanceof ol.geom.LinearRing)\n      return this.convertFromLinearRing(geometry)\n    else if (geometry instanceof ol.geom.Polygon)\n      return this.convertFromPolygon(geometry)\n    else if (geometry instanceof ol.geom.MultiPoint)\n      return this.convertFromMultiPoint(geometry)\n    else if (geometry instanceof ol.geom.MultiLineString)\n      return this.convertFromMultiLineString(geometry)\n    else if (geometry instanceof ol.geom.MultiPolygon)\n      return this.convertFromMultiPolygon(geometry)\n    else if (geometry instanceof ol.geom.GeometryCollection) return this.convertFromCollection(geometry)\n  }\n\n  convertFromPoint(point) {\n    const coordinates = point.getCoordinates()\n    return this.geometryFactory.createPoint(new Coordinate(coordinates[0], coordinates[1]))\n  }\n\n  convertFromLineString(lineString) {\n    return this.geometryFactory.createLineString(lineString.getCoordinates().map(function(coordinates) {\n      return new Coordinate(coordinates[0], coordinates[1])\n    }))\n  }\n\n  convertFromLinearRing(linearRing) {\n    return this.geometryFactory.createLinearRing(linearRing.getCoordinates().map(function(coordinates) {\n      return new Coordinate(coordinates[0], coordinates[1])\n    }))\n  }\n\n  convertFromPolygon(polygon) {\n    const linearRings = polygon.getLinearRings()\n    let shell = null\n    const holes = []\n    for (let i = 0; i < linearRings.length; i++) {\n      const linearRing = this.convertFromLinearRing(linearRings[i])\n      if (i === 0)\n        shell = linearRing\n      else holes.push(linearRing)\n    }\n    return this.geometryFactory.createPolygon(shell, holes)\n  }\n\n  convertFromMultiPoint(multiPoint) {\n    const points = multiPoint.getPoints().map(function(point) {\n      return this.convertFromPoint(point)\n    }, this)\n    return this.geometryFactory.createMultiPoint(points)\n  }\n\n  convertFromMultiLineString(multiLineString) {\n    const lineStrings = multiLineString.getLineStrings().map(function(lineString) {\n      return this.convertFromLineString(lineString)\n    }, this)\n    return this.geometryFactory.createMultiLineString(lineStrings)\n  }\n\n  convertFromMultiPolygon(multiPolygon) {\n    const polygons = multiPolygon.getPolygons().map(function(polygon) {\n      return this.convertFromPolygon(polygon)\n    }, this)\n    return this.geometryFactory.createMultiPolygon(polygons)\n  }\n\n  convertFromCollection(collection) {\n    const geometries = collection.getGeometries().map(function(geometry) {\n      return this.read(geometry)\n    }, this)\n    return this.geometryFactory.createGeometryCollection(geometries)\n  }\n\n  /**\n   * @param geometry\n   *          {Geometry}\n   * @return {ol.geom.Geometry}\n   * @memberof module:org/locationtech/jts/io/OL3Parser#\n   */\n  write(geometry) {\n    if (geometry.getGeometryType() === 'Point')\n      return this.convertToPoint(geometry.getCoordinate())\n    else if (geometry.getGeometryType() === 'LineString')\n      return this.convertToLineString(geometry)\n    else if (geometry.getGeometryType() === 'LinearRing')\n      return this.convertToLinearRing(geometry)\n    else if (geometry.getGeometryType() === 'Polygon')\n      return this.convertToPolygon(geometry)\n    else if (geometry.getGeometryType() === 'MultiPoint')\n      return this.convertToMultiPoint(geometry)\n    else if (geometry.getGeometryType() === 'MultiLineString')\n      return this.convertToMultiLineString(geometry)\n    else if (geometry.getGeometryType() === 'MultiPolygon')\n      return this.convertToMultiPolygon(geometry)\n    else if (geometry.getGeometryType() === 'GeometryCollection') return this.convertToCollection(geometry)\n  }\n\n  convertToPoint(coordinate) {\n    return new this.ol.geom.Point([coordinate.x, coordinate.y])\n  }\n\n  convertToLineString(lineString) {\n    const points = lineString._points._coordinates.map(p2c)\n    return new this.ol.geom.LineString(points)\n  }\n\n  convertToLinearRing(linearRing) {\n    const points = linearRing._points._coordinates.map(p2c)\n    return new this.ol.geom.LinearRing(points)\n  }\n\n  convertToPolygon(polygon) {\n    const rings = [polygon._shell._points._coordinates.map(p2c)]\n    for (let i = 0; i < polygon._holes.length; i++) rings.push(polygon._holes[i]._points._coordinates.map(p2c))\n\n    return new this.ol.geom.Polygon(rings)\n  }\n\n  convertToMultiPoint(multiPoint) {\n    return new this.ol.geom.MultiPoint(multiPoint.getCoordinates().map(p2c))\n  }\n\n  convertToMultiLineString(multiLineString) {\n    const lineStrings = []\n    for (let i = 0; i < multiLineString._geometries.length; i++) lineStrings.push(this.convertToLineString(multiLineString._geometries[i]).getCoordinates())\n\n    return new this.ol.geom.MultiLineString(lineStrings)\n  }\n\n  convertToMultiPolygon(multiPolygon) {\n    const polygons = []\n    for (let i = 0; i < multiPolygon._geometries.length; i++) polygons.push(this.convertToPolygon(multiPolygon._geometries[i]).getCoordinates())\n\n    return new this.ol.geom.MultiPolygon(polygons)\n  }\n\n  convertToCollection(geometryCollection) {\n    const geometries = []\n    for (let i = 0; i < geometryCollection._geometries.length; i++) {\n      const geometry = geometryCollection._geometries[i]\n      geometries.push(this.write(geometry))\n    }\n    return new this.ol.geom.GeometryCollection(geometries)\n  }\n}\n"],"names":["p2c","p","x","y","OL3Parser","constructor","geometryFactory","olReference","this","ol","inject","Point","LineString","LinearRing","Polygon","MultiPoint","MultiLineString","MultiPolygon","GeometryCollection","geom","read","geometry","convertFromPoint","convertFromLineString","convertFromLinearRing","convertFromPolygon","convertFromMultiPoint","convertFromMultiLineString","convertFromMultiPolygon","convertFromCollection","point","coordinates","getCoordinates","createPoint","lineString","createLineString","map","linearRing","createLinearRing","polygon","linearRings","getLinearRings","shell","holes","i","length","push","createPolygon","multiPoint","points","getPoints","createMultiPoint","multiLineString","lineStrings","getLineStrings","createMultiLineString","multiPolygon","polygons","getPolygons","createMultiPolygon","collection","geometries","getGeometries","createGeometryCollection","write","getGeometryType","convertToPoint","getCoordinate","convertToLineString","convertToLinearRing","convertToPolygon","convertToMultiPoint","convertToMultiLineString","convertToMultiPolygon","convertToCollection","coordinate","_points","_coordinates","rings","_shell","_holes","_geometries","geometryCollection"],"sourceRoot":""}