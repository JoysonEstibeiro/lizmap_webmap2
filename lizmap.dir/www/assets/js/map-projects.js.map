{"version":3,"file":"map-projects.js","mappings":"mBAAAA,EAAEC,UAAUC,OAAM,WAsBdF,EAAE,oDAAoDG,MAAK,SAAUC,EAAGC,GAAKL,EAAEK,GAAGC,KAAK,UAAW,GAAK,IACvGN,EAAE,oDAAoDO,OAAM,WACxD,IACIC,EADOR,EAAES,MACGH,KAAK,QACrBE,EAAOA,EAAKE,QAAQ,eAAgB,sBACpC,IAAIC,EAAcX,EAAE,iBACpBW,EAAYC,KAAKZ,EAAEQ,GAAMI,QAAQC,MAAM,QACvC,IAAIC,EAAOH,EAAYI,KAAK,aAAaC,OACrCC,EAAON,EAAYI,KAAK,aAAaC,OAazC,OAZAE,OAAOC,mBAAmBL,GAAM,SAAUM,GACtC,IAAIC,EAASC,WAAWC,OAAOC,WAAWP,GAC1CI,EAAOI,UAAUL,EAAO,aACxB,IAAIM,EAAYR,OAAOS,IAAIC,YAAYH,UAAUP,OAAOS,IAAIE,gBAAiB,aAC7E,GAAIR,EAAOS,eAAeJ,GAAY,CAClC,IAAIK,EAAOpB,EAAYI,KAAK,sBACxBiB,EAAUD,EAAKzB,KAAK,QACxByB,EAAKzB,KAAK,OAAQgB,WAAWW,KAAKC,UAAUF,EACtC,IAAMN,GAEhB,CACJ,KACO,CACX,IACA1B,EAAE,+CAA+CO,OAAM,WACnD,IAAI4B,EAAOnC,EAAES,MACT2B,EAAWD,EAAKE,SAASA,SAAStB,KAAK,mBAC3C,GAAIqB,EAASE,OAAS,EAClB,OAAO,EAGX,IAAIC,GADJH,EAAWA,EAAS,IACCI,QAAQC,iBACzBC,EAASN,EAASI,QAAQG,cAC1B7B,EAAOsB,EAASI,QAAQI,WACxB3B,EAAOmB,EAASI,QAAQK,WAY5B,OAjEJ,SAA6BC,EAAMC,EAAM3B,EAAO4B,GAC5C,IAAIlC,EAAOgC,EAAKpC,QAAQ,aAAc,IACjCI,KAAQmC,QAAQC,KACjBF,EAAWlC,GAEXd,EAAEmD,IAAKC,WAAoB,QAAEC,IAAK,CAC9B,WAAaN,EACb,QAAU3B,EACV,QAAU,MACV,QAAU,WACV,OAAUN,IACX,SAAWwC,GACVL,QAAQC,KAAKpC,GAAQwC,EACrB,IAAIhC,WAAWiC,WAAWzC,GAC1BkC,EAAWlC,EACf,GAGR,CAoCIK,CAAmBL,EAAMyB,EAAOG,GAAQ,SAAUtB,GAC9C,IAAIC,EAASC,WAAWC,OAAOC,WAAWP,GAC1CI,EAAOI,UAAUL,EAAO,aACxB,IAAIM,EAAY,IAAKJ,WAAWC,OAAOL,OAAOsC,WAAWC,MAAM9B,IAAI+B,QAASjC,UAAUP,OAAOS,IAAIE,gBAAiB,aAC9GR,EAAOS,eAAeJ,GACtBiC,OAAOC,SAAWtC,WAAWW,KAAKC,UAAUC,EAAK7B,KAAK,QAChD,IAAMoB,EAAUmC,UAAUlC,KAAImC,GAAKA,EAAEC,QAAQ,KAAIC,QAGvDL,OAAOC,SAAWzB,EAAK7B,KAAK,OACpC,KACO,CACX,GACJ,G","sources":["webpack://lizmap-web-client/./assets/src/legacy/map-projects.js"],"sourcesContent":["$(document).ready(function () {\n\n    function loadProjDefinition( aCRS, aRep, aProj, aCallback ) {\n        var proj = aCRS.replace(/^\\s+|\\s+$/g, ''); // trim();\n        if ( proj in Proj4js.defs ) {\n            aCallback( proj );\n        } else {\n            $.get( globalThis['lizUrls'].wms, {\n                'repository':aRep,\n                'project':aProj,\n                'SERVICE':'WMS',\n                'REQUEST':'GetProj4',\n                'authid': proj\n            }, function ( aText ) {\n                Proj4js.defs[proj] = aText;\n                new OpenLayers.Projection(proj);\n                aCallback( proj );\n            }\n            );\n        }\n    }\n\n    $('#map-projects .thumbnail a.liz-project-show-desc').each(function (i, e) { $(e).attr('onclick', ''); });\n    $('#map-projects .thumbnail a.liz-project-show-desc').click(function () {\n        var self = $(this);\n        var href = self.attr('href');\n        href = href.replace('link-projet-', 'liz-project-modal-');\n        var lizmapModal = $('#lizmap-modal');\n        lizmapModal.html($(href).html()).modal('show');\n        var proj = lizmapModal.find('span.proj').text();\n        var bbox = lizmapModal.find('span.bbox').text();\n        lizMap.loadProjDefinition(proj, function (aProj) {\n            var bounds = OpenLayers.Bounds.fromString(bbox);\n            bounds.transform(aProj, 'EPSG:4326');\n            var mapBounds = lizMap.map.getExtent().transform(lizMap.map.getProjection(), 'EPSG:4326');\n            if (bounds.containsBounds(mapBounds)) {\n                var view = lizmapModal.find('a.liz-project-view')\n                var viewUrl = view.attr('href');\n                view.attr('href', OpenLayers.Util.urlAppend(viewUrl\n                    , '#' + mapBounds\n                ));\n            }\n        });\n        return false;\n    });\n    $('#map-projects .thumbnail a.liz-project-view').click(function () {\n        var self = $(this);\n        var projElem = self.parent().parent().find('div.liz-project');\n        if (projElem.length < 1) {\n            return false;\n        }\n        projElem = projElem[0];\n        var repId = projElem.dataset.lizmapRepository;\n        var projId = projElem.dataset.lizmapProject;\n        var proj = projElem.dataset.lizmapProj;\n        var bbox = projElem.dataset.lizmapBbox;\n        loadProjDefinition(proj, repId, projId, function (aProj) {\n            var bounds = OpenLayers.Bounds.fromString(bbox);\n            bounds.transform(aProj, 'EPSG:4326');\n            var mapBounds = (new OpenLayers.Bounds(lizMap.mainLizmap.state.map.extent)).transform(lizMap.map.getProjection(), 'EPSG:4326');\n            if (bounds.containsBounds(mapBounds))\n                window.location = OpenLayers.Util.urlAppend(self.attr('href')\n                    , '#' + mapBounds.toArray().map(x => x.toFixed(6)).join()\n                );\n            else\n                window.location = self.attr('href');\n        });\n        return false;\n    });\n});\n"],"names":["$","document","ready","each","i","e","attr","click","href","this","replace","lizmapModal","html","modal","proj","find","text","bbox","lizMap","loadProjDefinition","aProj","bounds","OpenLayers","Bounds","fromString","transform","mapBounds","map","getExtent","getProjection","containsBounds","view","viewUrl","Util","urlAppend","self","projElem","parent","length","repId","dataset","lizmapRepository","projId","lizmapProject","lizmapProj","lizmapBbox","aCRS","aRep","aCallback","Proj4js","defs","get","globalThis","wms","aText","Projection","mainLizmap","state","extent","window","location","toArray","x","toFixed","join"],"sourceRoot":""}